<!-- frontend/src/app/dashboard/dashboard.component.html -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6" *ngIf="metrics">
  <mat-card class="animate-card">
    <mat-card-content class="flex items-center">
      <div class="w-[60px] h-[60px] rounded flex items-center justify-center bg-[#e8f2fc] text-[#1e88e5] mr-4">
        <mat-icon class="scale-150">point_of_sale</mat-icon>
      </div>
      <div>
        <h3 class="text-2xl font-bold text-gray-800 m-0">{{ metrics.ventasHoy | currency:'MXN' }}</h3>
        <span class="text-sm font-medium text-gray-500">Ventas Hoy</span>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="animate-card">
    <mat-card-content class="flex items-center">
      <div class="w-[60px] h-[60px] rounded flex items-center justify-center bg-[#fdf3e5] text-[#ffb22b] mr-4">
        <mat-icon class="scale-150">account_balance_wallet</mat-icon>
      </div>
      <div>
        <h3 class="text-2xl font-bold text-gray-800 m-0">{{ metrics.porCobrar | currency:'MXN' }}</h3>
        <span class="text-sm font-medium text-gray-500">Por Cobrar</span>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="animate-card">
    <mat-card-content class="flex items-center">
      <div class="w-[60px] h-[60px] rounded flex items-center justify-center bg-[#f1ebfa] text-[#7460ee] mr-4">
        <mat-icon class="scale-150">money_off</mat-icon>
      </div>
      <div>
        <h3 class="text-2xl font-bold text-gray-800 m-0">{{ metrics.porPagar | currency:'MXN' }}</h3>
        <span class="text-sm font-medium text-gray-500">Por Pagar</span>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="animate-card">
    <mat-card-content class="flex items-center">
      <div class="w-[60px] h-[60px] rounded flex items-center justify-center bg-[#fde9eb] text-[#fc4b6c] mr-4">
        <mat-icon class="scale-150">warning</mat-icon>
      </div>
      <div>
        <h3 class="text-2xl font-bold text-gray-800 m-0">{{ metrics.conteoBajos }} prod.</h3>
        <span class="text-sm font-medium text-gray-500">Stock Bajo</span>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6" *ngIf="metrics">
  <mat-card class="md:col-span-3 animate-card">
    <mat-card-header><mat-card-title>Tendencia de Ventas (7 D铆as)</mat-card-title></mat-card-header>
    <mat-card-content class="h-[300px] flex items-center justify-center mt-4">
      <div *ngIf="graficaVentas.length > 0; else noData" class="w-full h-full">
        <ngx-charts-area-chart [results]="graficaVentas" [scheme]="colorVentas" [gradient]="true" [xAxis]="true" [yAxis]="true" [showXAxisLabel]="true" xAxisLabel="Fecha" yAxisLabel="Venta ($)" [autoScale]="true"></ngx-charts-area-chart>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="md:col-span-1 animate-card">
    <mat-card-header><mat-card-title>Flujo de Dinero</mat-card-title></mat-card-header>
    <mat-card-content class="h-[300px] flex items-center justify-center mt-4">
      <ngx-charts-bar-vertical [results]="graficaFlujo" [scheme]="colorFlujo" [xAxis]="true" [yAxis]="true" [showXAxisLabel]="false" [showYAxisLabel]="true" [showDataLabel]="true"></ngx-charts-bar-vertical>
    </mat-card-content>
  </mat-card>

  <mat-card class="md:col-span-2 animate-card">
    <mat-card-header><mat-card-title> Top 5 M谩s Vendidos</mat-card-title></mat-card-header>
    <mat-card-content class="h-[250px] flex items-center justify-center mt-4">
      <div *ngIf="graficaTop.length > 0; else noData" class="w-full h-full">
        <ngx-charts-bar-horizontal [results]="graficaTop" [scheme]="colorTop" [xAxis]="true" [yAxis]="true" [showXAxisLabel]="true" [showYAxisLabel]="true" xAxisLabel="Cantidad Vendida"></ngx-charts-bar-horizontal>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="md:col-span-2 animate-card responsive-table">
    <mat-card-header><mat-card-title>锔 Alerta de Reabastecimiento</mat-card-title></mat-card-header>
    <mat-card-content class="mt-2 overflow-auto h-[250px]">
      <table mat-table [dataSource]="metrics.listaBajos" class="w-full">
        <ng-container matColumnDef="codigo">
          <th mat-header-cell *matHeaderCellDef>C贸d</th>
          <td mat-cell *matCellDef="let e" data-label="C贸digo">{{e.codigo}}</td>
        </ng-container>
        <ng-container matColumnDef="descripcion">
          <th mat-header-cell *matHeaderCellDef>Descripci贸n</th>
          <td mat-cell *matCellDef="let e" class="text-xs font-medium" data-label="Descripci贸n">{{e.descripcion}}</td>
        </ng-container>
        <ng-container matColumnDef="existencia">
          <th mat-header-cell *matHeaderCellDef>Stock</th>
          <td mat-cell *matCellDef="let e" class="font-bold text-right pr-4" data-label="Stock">{{e.existencia}}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <ng-template #noData>
    <div class="flex flex-col items-center justify-center h-full opacity-50">
      <mat-icon class="scale-150 mb-2">bar_chart</mat-icon>
      <p>No hay datos suficientes a煤n.</p>
    </div>
  </ng-template>
</div>
